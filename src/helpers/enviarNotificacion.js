const Usuario = require("../models/Usuario");
const Curso = require("../models/Curso");

// Simulaci√≥n de env√≠o de notificaci√≥n (puedes reemplazar con correo, push, etc.)
const enviarNotificacion = async (cursoId, mensaje) => {
  try {
    // Obtener estudiantes inscritos en el curso
    const curso = await Curso.findById(cursoId).populate("estudiantes");

    if (!curso || !curso.estudiantes || curso.estudiantes.length === 0) {
      console.warn("‚ö†Ô∏è No hay estudiantes inscritos en el curso.");
      return;
    }

    // Simular env√≠o de notificaci√≥n a cada estudiante
    curso.estudiantes.forEach((estudiante) => {
      console.log(`üì£ Notificaci√≥n enviada a ${estudiante.correo}: ${mensaje}`);
      // Aqu√≠ podr√≠as integrar correo, push, SMS, etc.
    });

    return true;
  } catch (error) {
    console.error("‚ùå Error al enviar notificaciones:", error);
    return false;
  }
};

module.exports = enviarNotificacion;
